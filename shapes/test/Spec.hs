{-# LANGUAGE MagicHash #-}

module Main where

import Test.Hspec
import Test.QuickCheck

import qualified Physics.Broadphase.AabbSpec
import qualified Physics.QuadtreeSpec
import Physics.QuadtreeSpec

import Physics.Broadphase.Aabb
import Physics.Linear
import Physics.Quadtree
import System.IO

main :: IO ()
main = hspec $ do
  describe "TemplateSpec" Physics.Broadphase.AabbSpec.spec
  describe "QuadtreeSpec" Physics.QuadtreeSpec.spec
{-
main = do
  params@(QTestCutoff cutoff, QTestAabbs boxes, QTestCenterDim centerDim) <- generate arbitrary
  let kObjs = zip [0..] boxes
  writeFile "failparams.txt" (show params)
  print $ insertObjs 1 kObjs $ emptyQTree centerDim
-}
{-
main = do
  print $ insertObjs 1 [(0, box)] $ emptyQTree (center, dim)
  where box = Aabb (Bounds 95.64582696890635## 160.1213959703698##) (Bounds 79.17628094684103## 80.00327485109509##)
        center = V2 38.417800483360836## 143.28496046617423##
        dim = V2 47.4485446127833## 117.6909789970613##
-}

--traceShow (length kObjs, _qSize, cutoff, kObjs, (_qCenter, _qDim)) $
--(1,0,1,[(71,Aabb (95.64582696890635,160.1213959703698) (79.17628094684103,80.00327485109509))],(V2 164.88908377845695 75.19397540216035,V2 0.0 0.0))

{-
(5,0,1,[(0,Aabb (30.74971271083057,90.83284145479168) (18.646714599432546,78.6234015816249)),(1,Aabb (47.158558549237696,64.3063125227932) (12.003090215472245,33.3759369325868)),(2,Aabb (90.86023277134618,106.24894142255792) (69.4825185986592,131.40810984335576)),(3,Aabb (86.40401744891409,161.20593792241687) (5.8999809733616075,31.7671894568192)),(4,Aabb (38.78105505972229,40.323458545876846) (72.5607071239625,122.47032315476142))],(V2 75.77156948666439 -6.609843451078447,V2 118.32153289899554 157.2520775386876))
    (2,0,1,[(2,Aabb (90.86023277134618,106.24894142255792) (69.4825185986592,131.40810984335576)),(3,Aabb (86.40401744891409,161.20593792241687) (5.8999809733616075,31.7671894568192))],(V2 134.93233593616216 72.01619531826535,V2 59.16076644949777 78.6260387693438))
    (2,0,1,[(1,Aabb (47.158558549237696,64.3063125227932) (12.003090215472245,33.3759369325868)),(4,Aabb (38.78105505972229,40.323458545876846) (72.5607071239625,122.47032315476142))],(V2 -2.8544692826794034 52.550922998419324,V2 59.16076644949777 78.6260387693438))
    (1,0,1,[(4,Aabb (38.78105505972229,40.323458545876846) (72.5607071239625,122.47032315476142))],(V2 26.725913942069482 91.86394238309123,V2 29.580383224748886 39.3130193846719))
-}
